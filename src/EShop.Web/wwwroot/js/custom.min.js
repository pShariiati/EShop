function onBeginForLogin() { $('#login-form button[type="submit"]').attr("disabled", "disabled"), $('#login-form button[type="submit"]').parent().find("p").addClass("d-none"), $("#login-errors-place ul").html("") } function onCompleteForLogin() { $('#login-form button[type="submit"]').removeAttr("disabled") } function onSuccessForLogin(t, e, n) { "Success" == t && ($("#login-form input").val(""), $("#login-form p").removeClass("d-none"), $("#login-form div").remove(), "/Account/ConfirmationAccount" == window.location.pathname ? location.href = "/" : location.reload()) } function onFailureForLogin(t) { putErrorsInElement("#login-errors-place", t.responseJSON), "شما قبلا وارد سیستم شده اید" == t.responseJSON[0] && location.reload() } function onBeginForRegister() { $('#register-form button[type="submit"]').attr("disabled", "disabled"), $("#register-form p").addClass("d-none"), $("#register-errors-place ul").html("") } function onCompleteForRegister() { $('#register-form button[type="submit"]').removeAttr("disabled") } function onSuccessForRegister(t, e, n) { "Success" == t && ($("#register-form input").val(""), $("#register-form p").removeClass("d-none"), $("#register-form div").remove()) } function onFailureForRegister(t) { putErrorsInElement("#register-errors-place", t.responseJSON), "شما قبلا وارد سیستم شده اید" == t.responseJSON[0] && location.reload() } function putErrorsInElement(t, e) { $(t).html("<ul></ul>"), e.forEach(e => { $(t + " ul").append("<li>" + e + "</li>") }) } $(document).ready(function () { let t = document.querySelectorAll("#sliders .carousel-item"); t.forEach(e => { let n = e.nextElementSibling; for (var o = 1; o < 4; o++) { n || (n = t[0]); let o = n.cloneNode(!0); e.appendChild(o.children[0]), n = n.nextElementSibling } }); var e = 1; $("#admin-main-menus li.list-group-item").each(function () { $(this).find("button").attr("id", "dropdownMenuButton" + e), $(this).find("ul").attr("aria-labelledby", "dropdownMenuButton" + e++) }); var n = $("#admin-main-menus").html(), o = $(this); o.width() > 991 ? ($("#admin-main-menus").html(n), $("#admin-navbar-menus").html("")) : ($("#admin-navbar-menus").html(n), $("#admin-main-menus").html("")), $(window).on("resize", function () { (o = $(this)).width() > 991 ? ($("#admin-main-menus").html(n), $("#admin-navbar-menus").html("")) : ($("#admin-navbar-menus").html(n), $("#admin-main-menus").html("")) }) }); var myModalEl = document.getElementById("login-register-modal"); function reloadTotalPriceInNavbar() { $("#checkout-button span").html("لطفا صبر کنید ..."), $.get("/Cart/GetUserCartTotalPrice", function (t) { $("#checkout-button span").html(t) }) } myModalEl && myModalEl.addEventListener("shown.bs.modal", function (t) { $.get("/Account/LoadLoginPartial", function (t, e) { $("#login-tab-place").html(t), $.validator.unobtrusive.parse($("#login-form")); var n = window.location.pathname; $("form#external-login-form").attr("action", "/Account/ExternalLogin?returnUrl=" + n) }) }), $("#register-tab").click(function () { $.get("/Account/LoadRegisterPartial", function (t, e) { $("#register-tab-place").html(t), $.validator.unobtrusive.parse($("#register-form")) }) }), "undefined" != typeof isUserAuthenticated && isUserAuthenticated && reloadTotalPriceInNavbar(); var myOffcanvas = document.getElementById("offcanvasScrolling"); function getCardDetails() { isUserAuthenticated && ($("#offcanvasScrolling .offcanvas-body").html(""), $("#cart-details-loading").removeClass("d-none"), $.get("/Cart/ShowCartDetailsPreview", function (t) { $("#cart-details-loading").addClass("d-none"), $("#offcanvasScrolling .offcanvas-body").html(t) })) } function increaseOrLowOffCartDetail(t, e, n, o) { $(n).closest(".d-block").find('div:eq(0) button, div:eq(2) button, button[class*="text-danger"]').attr("disabled", "disabled"), $.get("/Cart/IncreaseOrLowOff", { productId: t, isIncrease: e, removeAll: o }, function () { $(n).closest(".d-block").find('div:eq(0) button, div:eq(2) button, button[class*="text-danger"]').removeAttr("disabled"); var t = $(n).closest(".d-block"), r = parseInt($(t).find("div:eq(1) input").val()), a = parseInt($(t).find("p:first span").html().replace(/,/g, "")); if (1 !== r || e) if (o) $(n).closest(".card").remove(); else { var i = e ? r + 1 : r - 1; $(t).find("div:eq(1) input").val(i); var l = a * i; $(t).find("p:eq(1) span").html(l.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")) } else $(n).closest(".card").remove(); var s, d = parseInt($("#cart-total-price").html().replace(/,/g, "")); s = e ? (d + a).toString() : o ? (d - a * r).toString() : (d - a).toString(), $("#cart-total-price, #checkout-button span").html(s.replace(/\B(?=(\d{3})+(?!\d))/g, ",")) }) } null != myOffcanvas && myOffcanvas.addEventListener("show.bs.offcanvas", function () { getCardDetails() });